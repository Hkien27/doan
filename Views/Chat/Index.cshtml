<h3>ðŸ¤– Chat AI gá»£i Ã½ sáº£n pháº©m</h3>

<div id="chatBox" style="height:400px;overflow:auto;border:1px solid #ccc;padding:10px"></div>

<input id="chatInput" class="form-control mt-2" placeholder="Há»i gÃ¬ Ä‘Ã³..." />
<button class="btn btn-primary mt-2" onclick="send()">Gá»­i</button>

<script>
async function send() {
    const input = document.getElementById("chatInput");
    const msg = input.value;
    if (!msg) return;

    const box = document.getElementById("chatBox");
    box.innerHTML += `<p><b>ðŸ§‘ Báº¡n:</b> ${msg}</p>`;
    input.value = "";

    const res = await fetch("/api/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: msg })
    });

    const data = await res.json();

    box.innerHTML += `<p><b>ðŸ¤– AI:</b> ${data.reply}</p>`;

    if (data.products?.length) {
        data.products.forEach(p => {
            box.innerHTML += `
              <div style="margin-left:20px">
                ðŸ‘‰ <a href="/Items/Details/${p.itemId}">
                  ${p.title} - ${p.price.toLocaleString()}Ä‘
                </a>
              </div>`;
        });
    }

    box.scrollTop = box.scrollHeight;
}
</script>
